<ng-container *ngVar="(communitiesRD$ | async) as communitiesRD">
  <div *ngIf="communitiesRD?.hasSucceeded ">
    <h2>
      {{'home.top-level-communities.head' | translate}}
    </h2>
  <p class="lead">{{'home.top-level-communities.help' | translate}}</p>
  <!--
  <ds-viewable-collection
    [config]="config"
    [sortConfig]="sortConfig"
    [objects]="communitiesRD$ | async"
    [hideGear]="true">
  </ds-viewable-collection>
  -->
	<p-carousel [value]="communitiesRD?.payload?.page" [numVisible]="3" [numScroll]="3" [circular]="true" [responsiveOptions]="responsiveOptions" autoplayInterval="3000" [showIndicators]="false" >
		<ng-template pTemplate="item" let-community>
			<a href="communities/{{ community.id }}" class="flex flex-col items-center">
				<div class="flex flex-col items-center justify-center border border-surface rounded-border m-2 p-4 text-center">
					<img class="annexImage" src="https://www.cimmyt.org/content/uploads/2023/12/whoMaize-1.svg" alt="50% of maize and wheat icon">
					<div class="mb-4 font-medium">{{ community._name }}</div>
				</div>
			</a>
		</ng-template>
	</p-carousel>
</div>
<ds-error *ngIf="communitiesRD?.hasFailed " message="{{'error.top-level-communities' | translate}}"></ds-error>
<ds-loading *ngIf="communitiesRD?.isLoading " message="{{'loading.top-level-communities' | translate}}"></ds-loading></ng-container>
